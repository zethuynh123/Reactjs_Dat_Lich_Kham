{
    "sourceFile": "src/containers/Auth/Login.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1696048730598,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1696048785925,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,35 @@\n+import React, { Component } from \"react\";\r\n+import { connect } from \"react-redux\";\r\n+import { push } from \"connected-react-router\";\r\n+\r\n+import * as actions from \"../store/actions\";\r\n+\r\n+import \"./Login.scss\";\r\n+import { FormattedMessage } from \"react-intl\";\r\n+\r\n+class Login extends Component {\r\n+  constructor(props) {\r\n+    super(props);\r\n+  }\r\n+\r\n+  render() {\r\n+    return <div>hello login</div>;\r\n+  }\r\n+}\r\n+\r\n+const mapStateToProps = (state) => {\r\n+  return {\r\n+    language: state.app.language,\r\n+  };\r\n+};\r\n+\r\n+const mapDispatchToProps = (dispatch) => {\r\n+  return {\r\n+    navigate: (path) => dispatch(push(path)),\r\n+    adminLoginSuccess: (adminInfo) =>\r\n+      dispatch(actions.adminLoginSuccess(adminInfo)),\r\n+    adminLoginFail: () => dispatch(actions.adminLoginFail()),\r\n+  };\r\n+};\r\n+\r\n+export default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n"
                },
                {
                    "date": 1696048898782,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,8 @@\n import React, { Component } from \"react\";\r\n import { connect } from \"react-redux\";\r\n import { push } from \"connected-react-router\";\r\n-\r\n-import * as actions from \"../store/actions\";\r\n-\r\n+import * as actions from \"../../store/actions\";\r\n import \"./Login.scss\";\r\n import { FormattedMessage } from \"react-intl\";\r\n \r\n class Login extends Component {\r\n"
                },
                {
                    "date": 1696049244006,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,33 +1,173 @@\n-import React, { Component } from \"react\";\r\n-import { connect } from \"react-redux\";\r\n+import React, { Component } from 'react';\r\n+import { connect } from 'react-redux';\r\n import { push } from \"connected-react-router\";\r\n-import * as actions from \"../../store/actions\";\r\n-import \"./Login.scss\";\r\n-import { FormattedMessage } from \"react-intl\";\r\n \r\n+import * as actions from \"../store/actions\";\r\n+import { KeyCodeUtils, LanguageUtils } from \"../utils\";\r\n+\r\n+import userIcon from '../../src/assets/images/user.svg';\r\n+import passIcon from '../../src/assets/images/pass.svg';\r\n+import './Login.scss';\r\n+import { FormattedMessage } from 'react-intl';\r\n+\r\n+import adminService from '../services/adminService';\r\n+\r\n class Login extends Component {\r\n-  constructor(props) {\r\n-    super(props);\r\n-  }\r\n+    constructor(props) {\r\n+        super(props);\r\n+        this.btnLogin = React.createRef();\r\n+    }\r\n \r\n-  render() {\r\n-    return <div>hello login</div>;\r\n-  }\r\n+    initialState = {\r\n+        username: '',\r\n+        password: '',\r\n+        loginError: ''\r\n+    }\r\n+\r\n+    state = {\r\n+        ...this.initialState\r\n+    };\r\n+\r\n+    refresh = () => {\r\n+        this.setState({\r\n+            ...this.initialState\r\n+        })\r\n+    }\r\n+\r\n+    onUsernameChange = (e) => {\r\n+        this.setState({ username: e.target.value })\r\n+    }\r\n+\r\n+    onPasswordChange = (e) => {\r\n+        this.setState({ password: e.target.value })\r\n+    }\r\n+\r\n+    redirectToSystemPage = () => {\r\n+        const { navigate } = this.props;\r\n+        const redirectPath = '/system/user-manage';\r\n+        navigate(`${redirectPath}`);\r\n+    }\r\n+\r\n+    processLogin = () => {\r\n+        const { username, password } = this.state;\r\n+\r\n+        const { adminLoginSuccess, adminLoginFail } = this.props;\r\n+        let loginBody = {\r\n+            username: 'admin',\r\n+            password: '123456'\r\n+        }\r\n+        //sucess\r\n+        let adminInfo = {\r\n+            \"tlid\": \"0\",\r\n+            \"tlfullname\": \"Administrator\",\r\n+            \"custype\": \"A\",\r\n+            \"accessToken\": \"eyJhbGciOiJIU\"\r\n+        }\r\n+\r\n+        adminLoginSuccess(adminInfo);\r\n+        this.refresh();\r\n+        this.redirectToSystemPage();\r\n+        try {\r\n+            adminService.login(loginBody)\r\n+        } catch (e) {\r\n+            console.log('error login : ', e)\r\n+        }\r\n+\r\n+    }\r\n+\r\n+    handlerKeyDown = (event) => {\r\n+        const keyCode = event.which || event.keyCode;\r\n+        if (keyCode === KeyCodeUtils.ENTER) {\r\n+            event.preventDefault();\r\n+            if (!this.btnLogin.current || this.btnLogin.current.disabled) return;\r\n+            this.btnLogin.current.click();\r\n+        }\r\n+    };\r\n+\r\n+    componentDidMount() {\r\n+        document.addEventListener('keydown', this.handlerKeyDown);\r\n+    }\r\n+\r\n+    componentWillUnmount() {\r\n+        document.removeEventListener('keydown', this.handlerKeyDown);\r\n+        // fix Warning: Can't perform a React state update on an unmounted component\r\n+        this.setState = (state, callback) => {\r\n+            return;\r\n+        };\r\n+    }\r\n+\r\n+    render() {\r\n+        const { username, password, loginError } = this.state;\r\n+        const { lang } = this.props;\r\n+\r\n+        return (\r\n+            <div className=\"login-wrapper\">\r\n+                <div className=\"login-container\">\r\n+                    <div className=\"form_login\">\r\n+                        <h2 className=\"title\">\r\n+                            <FormattedMessage id=\"login.login\" />\r\n+                        </h2>\r\n+                        <div className=\"form-group icon-true\">\r\n+                            <img className=\"icon\" src={userIcon} alt=\"this\" />\r\n+                            <input\r\n+                                placeholder={LanguageUtils.getMessageByKey(\"login.username\", lang)}\r\n+                                id=\"username\"\r\n+                                name=\"username\"\r\n+                                type=\"text\"\r\n+                                className=\"form-control\"\r\n+                                value={username}\r\n+                                onChange={this.onUsernameChange}\r\n+                            />\r\n+                        </div>\r\n+\r\n+                        <div id=\"phone-input-container\" className=\"form-group icon-true\">\r\n+                            <img className=\"icon\" src={passIcon} alt=\"this\" />\r\n+                            <input\r\n+                                placeholder={LanguageUtils.getMessageByKey(\"login.password\", lang)}\r\n+                                id=\"password\"\r\n+                                name=\"password\"\r\n+                                type=\"password\"\r\n+                                className=\"form-control\"\r\n+                                value={password}\r\n+                                onChange={this.onPasswordChange}\r\n+                            />\r\n+                        </div>\r\n+\r\n+                        {loginError !== '' && (\r\n+                            <div className='login-error'>\r\n+                                <span className='login-error-message'>{loginError}</span>\r\n+                            </div>\r\n+                        )}\r\n+\r\n+                        <div className=\"form-group login\">\r\n+                            <input\r\n+                                ref={this.btnLogin}\r\n+                                id=\"btnLogin\"\r\n+                                type=\"submit\"\r\n+                                className=\"btn\"\r\n+                                value={LanguageUtils.getMessageByKey(\"login.login\", lang)}\r\n+                                onClick={this.processLogin}\r\n+                            />\r\n+                        </div>\r\n+                    </div>\r\n+                </div>\r\n+            </div>\r\n+        )\r\n+    }\r\n }\r\n \r\n-const mapStateToProps = (state) => {\r\n-  return {\r\n-    language: state.app.language,\r\n-  };\r\n+const mapStateToProps = state => {\r\n+    return {\r\n+        lang: state.app.language\r\n+    };\r\n };\r\n \r\n-const mapDispatchToProps = (dispatch) => {\r\n-  return {\r\n-    navigate: (path) => dispatch(push(path)),\r\n-    adminLoginSuccess: (adminInfo) =>\r\n-      dispatch(actions.adminLoginSuccess(adminInfo)),\r\n-    adminLoginFail: () => dispatch(actions.adminLoginFail()),\r\n-  };\r\n+const mapDispatchToProps = dispatch => {\r\n+    return {\r\n+        navigate: (path) => dispatch(push(path)),\r\n+        adminLoginSuccess: (adminInfo) => dispatch(actions.adminLoginSuccess(adminInfo)),\r\n+        adminLoginFail: () => dispatch(actions.adminLoginFail()),\r\n+    };\r\n };\r\n \r\n export default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n"
                },
                {
                    "date": 1696049287547,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,10 +4,10 @@\n \r\n import * as actions from \"../store/actions\";\r\n import { KeyCodeUtils, LanguageUtils } from \"../utils\";\r\n \r\n-import userIcon from \"../../src/assets/images/user.svg\";\r\n-import passIcon from \"../../src/assets/images/pass.svg\";\r\n+import userIcon from \"../../../src/assets/images/user.svg\";\r\n+import passIcon from \"../../../src/assets/images/pass.svg\";\r\n import \"./Login.scss\";\r\n import { FormattedMessage } from \"react-intl\";\r\n \r\n import adminService from \"../services/adminService\";\r\n"
                },
                {
                    "date": 1696049296472,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n import passIcon from \"../../../src/assets/images/pass.svg\";\r\n import \"./Login.scss\";\r\n import { FormattedMessage } from \"react-intl\";\r\n \r\n-import adminService from \"../services/adminService\";\r\n+import adminService from \"../../services/adminService\";\r\n \r\n class Login extends Component {\r\n   constructor(props) {\r\n     super(props);\r\n"
                }
            ],
            "date": 1696048730598,
            "name": "Commit-0",
            "content": "import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { push } from \"connected-react-router\";\r\n\r\nimport * as actions from \"../store/actions\";\r\nimport { KeyCodeUtils, LanguageUtils } from \"../utils\";\r\n\r\nimport userIcon from '../../src/assets/images/user.svg';\r\nimport passIcon from '../../src/assets/images/pass.svg';\r\nimport './Login.scss';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport adminService from '../services/adminService';\r\n\r\nclass Login extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        \r\n\r\n        return (\r\n           <div>\r\n            hello login\r\n           </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        language: state.app.language\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        navigate: (path) => dispatch(push(path)),\r\n        adminLoginSuccess: (adminInfo) => dispatch(actions.adminLoginSuccess(adminInfo)),\r\n        adminLoginFail: () => dispatch(actions.adminLoginFail()),\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n"
        }
    ]
}